version: "2"

run:
  timeout: 5m

linters:
  default: none

  enable:
    # Standard (previously implicit via default: standard)
    - errcheck
    - govet
    - ineffassign
    - staticcheck
    - unused

    # Bug detection
    - bodyclose
    - noctx
    - rowserrcheck
    - sqlclosecheck

    # Security
    - gosec

    # Error handling
    - errname
    - errorlint

    # Style & conventions
    - gocritic
    - revive
    - goconst
    - godot
    - misspell
    - nolintlint

    # Code quality
    - dupl
    - mnd

    # Performance
    - prealloc
    - unconvert

    # Complexity
    - cyclop
    - gocognit
    - nestif

    # Unused code
    - unparam

    # Testing
    - thelper
    - tparallel
    - testifylint

    # Logging
    - sloglint

  settings:
    errcheck:
      check-type-assertions: true

    staticcheck:
      checks:
        - all

    gosec:
      excludes:
        - G104 # Duplicates errcheck

    errorlint:
      errorf: true
      asserts: true
      comparison: true

    gocritic:
      enabled-tags:
        - diagnostic
        - style
        - performance

    revive:
      severity: error

    goconst:
      min-len: 3
      min-occurrences: 3

    nolintlint:
      require-explanation: true
      require-specific: true

    misspell:
      locale: US

    dupl:
      threshold: 100

    mnd:
      checks:
        - argument
        - case
        - condition
        - operation
        - return
        - assign

    cyclop:
      max-complexity: 15

    gocognit:
      min-complexity: 20

    nestif:
      min-complexity: 5

    testifylint:
      enable-all: true

    sloglint:
      no-mixed-args: true
      kv-only: false
      attr-only: false

  exclusions:
    paths:
      - vendor
      - testdata
    rules:
      # Relax linters for test files
      - path: _test\.go
        linters:
          - gosec
          - bodyclose
          - noctx
          - gocritic
          - dupl
          - mnd
      # Test-only linters â€” exclude from non-test files
      - path-except: _test\.go
        linters:
          - thelper
          - tparallel
          - testifylint

formatters:
  enable:
    - gofumpt
    - goimports

  settings:
    gofumpt:
      module-path: github.com/jsamuelsen11/go-service-template-v2
      extra-rules: true

    goimports:
      local-prefixes:
        - github.com/jsamuelsen11/go-service-template-v2
